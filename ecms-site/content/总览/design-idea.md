---
title: "设计思想"
date: 2021-11-22T17:39:10+08:00
---
## 错误码的价值
什么是错误码的价值：错误码给我们提供了一种快速过滤问题的方法。如HTTP的Code，一看到5XX，我们就知道是服务端的问题，一看到4XX，就是客户端的问题。错误码给服务提供方提供了一种快速排查问题的手段，给服务消费方提供了一个分析问题的方法。

## 错误码使用频率分析
错误码的调用和查询相对于错误码的修改是更高频的操作，所以在设计上会尽量减少对文档管理的错误码调用习惯的改变。但为了更好规范错误码的定义，该设计会稍微增加一点错误码修改的学习成本。

## 目标和收益
- 保障错误码定义规范化、清晰易维护
- 通过制定和保证全局的错误码定义规范，使得新增错误码清晰可辨认，具备一定的可读性，且全局唯一。
- QA/PM 和客户端同学根据 code 大概了解错误原因，也可从网页直接查询错误码含义。

## 原则
- 不改变旧的错误码使用习惯，依然要支持 Go Module 错误码使用时名字可自动补全的特性，方便研发的同学调用。
- 要改变旧的错误码创建、修改、查询方式，规范错误码的命名和占位段。
- 可完全独立部署运行，可中台化（optional 可开源）
- 使用纯数字，最大不能超过32位
- 一定要做到足够简单，尽量减少 RD 在使用习惯上的改变。用户只关心简不简单，好不好用！